// Generated by ts-to-zod
import { z } from 'zod';

export const pipfileDependencyDetailSchema = z.object({
  version: z.string().optional(),
  hashes: z.array(z.string()).optional(),
  extras: z.union([z.array(z.string()), z.string()]).optional(),
  markers: z.string().optional(),
  index: z.string().optional(),
  git: z.string().optional(),
  ref: z.string().optional(),
  editable: z.boolean().optional(),
  path: z.string().optional(),
});

export const pipfileDependencySchema = z.union([
  z.string(),
  pipfileDependencyDetailSchema,
]);

export const pipfileSourceSchema = z.object({
  name: z.string(),
  url: z.string(),
  verify_ssl: z.boolean().optional(),
});

export const pipfileLikeSchema = z
  .record(
    z.union([
      z.record(pipfileDependencySchema),
      z.array(pipfileSourceSchema),
      z.record(z.string()),
      z.undefined(),
    ])
  )
  .and(
    z.object({
      packages: z.record(pipfileDependencySchema).optional(),
      'dev-packages': z.record(pipfileDependencySchema).optional(),
      source: z.array(pipfileSourceSchema).optional(),
      scripts: z.record(z.string()).optional(),
    })
  );

export const pipfileLockMetaSchema = z.object({
  hash: z
    .object({
      sha256: z.string().optional(),
    })
    .optional(),
  'pipfile-spec': z.number().optional(),
  requires: z
    .object({
      python_version: z.string().optional(),
      python_full_version: z.string().optional(),
    })
    .optional(),
  sources: z.array(pipfileSourceSchema).optional(),
});

export const pipfileLockLikeSchema = z
  .record(
    z.union([
      pipfileLockMetaSchema,
      z.record(pipfileDependencyDetailSchema),
      z.undefined(),
    ])
  )
  .and(
    z.object({
      _meta: pipfileLockMetaSchema.optional(),
      default: z.record(pipfileDependencyDetailSchema).optional(),
      develop: z.record(pipfileDependencyDetailSchema).optional(),
    })
  );
