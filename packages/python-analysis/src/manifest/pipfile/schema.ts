/**
 * Zod schemas for Pipfile and Pipfile.lock configuration types.
 *
 * Types are defined in types.ts (source of truth).
 * Schemas are generated by ts-to-zod and re-exported here with proper typing.
 *
 * @module pipfile/schema
 */

import type { z } from 'zod';

import {
  pipfileDependencyDetailSchema as generatedPipfileDependencyDetailSchema,
  pipfileDependencySchema as generatedPipfileDependencySchema,
  pipfileLikeSchema as generatedPipfileLikeSchema,
  pipfileLockLikeSchema as generatedPipfileLockLikeSchema,
  pipfileLockMetaSchema as generatedPipfileLockMetaSchema,
  pipfileSourceSchema as generatedPipfileSourceSchema,
} from './schema.zod';

import type {
  PipfileDependency,
  PipfileDependencyDetail,
  PipfileLike,
  PipfileLockLike,
  PipfileLockMeta,
  PipfileSource,
} from './types';

/**
 * Schema for Pipfile dependency detail.
 */
export const PipfileDependencyDetailSchema =
  generatedPipfileDependencyDetailSchema.passthrough() as z.ZodType<PipfileDependencyDetail>;

/**
 * Schema for Pipfile dependency (string version specifier or detail object).
 */
export const PipfileDependencySchema =
  generatedPipfileDependencySchema as z.ZodType<PipfileDependency>;

/**
 * Schema for Pipfile source configuration.
 */
export const PipfileSourceSchema =
  generatedPipfileSourceSchema.passthrough() as z.ZodType<PipfileSource>;

/**
 * Schema for Pipfile.
 *
 * Note: This is an intersection type (z.record().and(z.object())) so we don't
 * call .passthrough() - the record part already allows additional keys.
 */
export const PipfileLikeSchema =
  generatedPipfileLikeSchema as z.ZodType<PipfileLike>;

// =============================================================================
// Pipfile.lock schemas
// =============================================================================

/**
 * Schema for Pipfile.lock _meta section.
 */
export const PipfileLockMetaSchema =
  generatedPipfileLockMetaSchema.passthrough() as z.ZodType<PipfileLockMeta>;

/**
 * Schema for Pipfile.lock.
 *
 * Note: This is an intersection type (z.record().and(z.object())) so we don't
 * call .passthrough() - the record part already allows additional keys.
 */
export const PipfileLockLikeSchema =
  generatedPipfileLockLikeSchema as z.ZodType<PipfileLockLike>;
