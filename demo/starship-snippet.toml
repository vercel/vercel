# BEGIN-cli-demo-starship
[custom.vc_version]
ignore_timeout = true
when = """case "$PWD" in "$HOME"/demo-old*|"$HOME"/demo-new*) true ;; *) false ;; esac"""
command = """
case "$PWD" in
  "$HOME"/demo-old*) ver=$("$HOME/demo-old/node_modules/.bin/vercel" --version 2>/dev/null) ;;
  "$HOME"/demo-new*) ver=$(node "$HOME/vercel/vercel-demo/packages/cli/dist/index.js" --version 2>/dev/null) ;;
esac
team=$(python3 -c "
import json,os
cfg=os.path.expanduser('~/Library/Application Support/com.vercel.cli/config.json')
d=json.load(open(cfg))
tid=d.get('currentTeam','')
teams={'team_ZrswwWlkgu3cRre7Tk7Rr0HV':'acme-marketplace-team'}
print(teams.get(tid,tid[:12] if tid else '?'))
" 2>/dev/null)
project=$(python3 -c "
import json,os
pj=os.path.join(os.getcwd(),'.vercel','project.json')
print(json.load(open(pj)).get('projectName','?') if os.path.exists(pj) else '?')
" 2>/dev/null)
printf "vc %s @ %s/%s" "${ver:-?}" "${team:-?}" "${project:-?}"
"""
format = " [\\[$output\\]](bold yellow) "
# END-cli-demo-starship
